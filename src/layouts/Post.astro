---
import BlogPost from "../components/BlogPost.astro"
import Footer from "../components/Footer.astro"
import Navigation from "../components/Navigation.astro"
import Comments from "../components/Comments.astro"

let { title, draft } = Astro.props
---

<html>
    <head>
        <meta charset="utf-8" />
		<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <link rel="shortcut icon" href="/favicon.ico" />
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
        <link rel="manifest" href="/site.webmanifest" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
        <script is:inline>
            // Prevent flash of wrong theme
            (function() {
                const getSystemPreference = () => {
                    return window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark';
                };
                const stored = localStorage.getItem('theme');
                const theme = stored || getSystemPreference();
                if (theme === 'light') {
                    document.documentElement.setAttribute('data-theme', 'light');
                }
            })();
        </script>
    </head>
    <body>
		<Navigation />
        <main>
            <BlogPost>
                <slot/>
                {(!draft || title !== "About Me") ? (<Comments />) : null}
            </BlogPost>
        </main>
		<Footer />
    </body>
        
</html>